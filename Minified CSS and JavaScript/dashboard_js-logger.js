// Multi-Site Dashboard JavaScript - LOGGER MODULE - Dashboard Version: 1.8 - Author: Eric Haupt - Copyright (c) 2025 Eric Haupt - Released under the MIT License. See LICENSE file for details.
if(!window.Dashboard){window.Dashboard={};}if(!window.Dashboard.logger){window.Dashboard.logger={};}Dashboard.logger.init=function(){Dashboard.logger.state={visible:false,expanded:false,fontSize:22,container:null,initialized:false,previousDimensions:{},columnWidths:{timestamp:12,site:14,change:10,member:23,pool:12}};Dashboard.logger.storage={key:'dashboardLogEntries',maxEntries:5000};Dashboard.logger.loadLoggerState();Dashboard.logger.safeInitLogger();Dashboard.logger.registerWithUI();if(Dashboard.data&&Dashboard.data.enableLogger){Dashboard.data.enableLogger();}if(Dashboard.logger.state.visible&&Dashboard.core&&Dashboard.core.onLoggerVisible){Dashboard.core.onLoggerVisible();}};Dashboard.logger.safeInitLogger=function(){if(Dashboard.logger.state.initialized||document.getElementById('dashboard-logger')){return;}if(document.readyState!=='complete'&&document.readyState!=='interactive'){setTimeout(Dashboard.logger.safeInitLogger,100);return;}try{Dashboard.logger.initLogger();}catch(e){console.error('Logger: Logger initialization failed:',e);}};Dashboard.logger.initLogger=function(){const loggerHTML=`<div class="dashboard-logger-container" id="dashboard-logger" style="position: fixed !important; bottom: 90px !important; right: 20px !important; width: 80vw; height: 25vh; background: #2a2a2a !important; border: 2px solid #555555 !important; border-radius: 0; box-shadow: none !important; display: flex; flex-direction: column; font-family: 'Lucida Console', 'Monaco', 'Courier New', monospace !important; overflow: visible; min-height: 15vh; max-height: calc(100vh - 180px) !important; min-width: 50vw; max-width: 95vw; z-index: 2000; display: none;"><div class="logger-header" style="background: linear-gradient(to bottom, #3a3a3a 0%, #2a2a2a 100%) !important; color: #f5f5f5 !important; padding: 6px 12px; border-bottom: 1px solid #555555 !important; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; font-size: 0.9em; font-weight: 600; cursor: move; user-select: none;"><div class="logger-title" style="flex: 1; color: #f5f5f5 !important;">Dashboard Event Logger</div><div class="logger-controls" style="display: flex; align-items: center; gap: 15px;"><div class="font-size-control" style="display: flex; align-items: center; gap: 8px; color: #f5f5f5 !important; font-size: 0.8em; opacity: 0.8;"><span>Text Size</span><div class="font-size-buttons" style="display: flex; gap: 10px;"><button class="font-btn" data-action="font-decrease" title="Decrease font size" style="background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.3) !important; color: #ffffff !important; padding: 6px 8px; border-radius: 4px; cursor: pointer; font-size: 1em; font-weight: 500; transition: all 0.2s; min-width: 28px; text-align: center;">−</button><button class="font-btn" data-action="font-reset" title="Reset font size" style="background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.3) !important; color: #ffffff !important; padding: 6px 8px; border-radius: 4px; cursor: pointer; font-size: 1em; font-weight: 500; transition: all 0.2s; min-width: 28px; text-align: center;">R</button><button class="font-btn" data-action="font-increase" title="Increase font size" style="background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.3) !important; color: #ffffff !important; padding: 6px 8px; border-radius: 4px; cursor: pointer; font-size: 1em; font-weight: 500; transition: all 0.2s; min-width: 28px; text-align: center;">+</button></div></div><button class="copy-btn" data-action="copy" title="Copy text to clipboard" style="background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.3) !important; color: #f5f5f5 !important; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; font-weight: 500; transition: all 0.2s; margin-left: 15px; width: 70px; min-width: 70px; text-align: center;">Copy</button><button class="expand-btn" data-action="expand" title="Expand logger window" style="background: rgba(255,255,255,0.2) !important; border: 1px solid rgba(255,255,255,0.3) !important; color: #f5f5f5 !important; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; font-weight: 500; transition: all 0.2s; margin-left: 15px; width: 70px; min-width: 70px; text-align: center;">Expand</button><button class="clear-btn" data-action="clear" title="Clear logger window" style="background: rgba(255,165,0,0.3) !important; border: 1px solid rgba(255,165,0,0.5) !important; color: #f5f5f5 !important; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.85em; font-weight: 500; transition: all 0.2s; margin-left: 15px; width: 70px; min-width: 70px; text-align: center;">Clear</button><button class="close-btn" data-action="close" title="Close logger" style="background: rgba(220,53,69,0.3) !important; border: 1px solid rgba(220,53,69,0.5) !important; color: #f5f5f5 !important; padding: 6px 10px; border-radius: 4px; cursor: pointer; font-size: 0.9em; font-weight: bold; transition: all 0.2s; margin-left: 15px;">×</button></div></div><div class="logger-content" id="dashboard-logger-content" style="flex: 1; overflow-y: auto; padding: 8px; background: #000000 !important; font-size: 14px; line-height: 1.3; box-sizing: border-box; min-height: 0; color: #ffffff;"></div><div class="resize-handle-bottom" id="logger-resize-handle-bottom" style="position: absolute; bottom: -5px; left: 0; right: 0; height: 8px; background: #666666 !important; cursor: ns-resize; opacity: 0.7; transition: opacity 0.2s; z-index: 2001;"></div><div class="resize-handle-right" id="logger-resize-handle-right" style="position: absolute; top: 0; bottom: 0; right: -5px; width: 8px; background: #666666 !important; cursor: ew-resize; opacity: 0.7; transition: opacity 0.2s; z-index: 2001;"></div><div class="resize-handle-corner" id="logger-resize-handle-corner" style="position: absolute; bottom: -5px; right: -5px; width: 12px; height: 12px; background: #777777 !important; cursor: nw-resize; opacity: 0.8; transition: opacity 0.2s; z-index: 2002; border-radius: 3px 0 0 0;"></div></div>`;document.body.insertAdjacentHTML('beforeend',loggerHTML);Dashboard.logger.state.container=document.getElementById('dashboard-logger');if(!Dashboard.logger.state.container){throw new Error('Failed to create logger container');}setTimeout(()=>{Dashboard.logger.initLoggerEventHandlers();Dashboard.logger.initLoggerDragResize();Dashboard.logger.applyLoggerState();},50);Dashboard.logger.state.initialized=true;};Dashboard.logger.toggleExpand=function(){const logger=Dashboard.logger.state.container;const expandBtn=logger?logger.querySelector('.expand-btn'):null;if(!logger||!expandBtn)return;if(!Dashboard.logger.state.expanded){const computedStyle=window.getComputedStyle(logger);Dashboard.logger.state.previousDimensions={width:computedStyle.width,height:computedStyle.height};logger.style.width='calc(100vw - 40px)';logger.style.height='50vh';logger.style.left='50%';logger.style.transform='translateX(-50%)';logger.style.bottom='20px';logger.style.right='auto';expandBtn.textContent='Restore';expandBtn.style.background='rgba(255,165,0,0.3)';expandBtn.style.borderColor='rgba(255,165,0,0.5)';Dashboard.logger.state.expanded=true;setTimeout(()=>{expandBtn.setAttribute('title','Restore logger window');},10);}else{const prev=Dashboard.logger.state.previousDimensions;if(prev){logger.style.width=prev.width;logger.style.height=prev.height;}logger.style.left='50%';logger.style.transform='translateX(-50%)';logger.style.bottom='90px';logger.style.right='auto';expandBtn.style.background='rgba(255,255,255,0.2)';expandBtn.style.borderColor='rgba(255,255,255,0.3)';expandBtn.textContent='Expand';Dashboard.logger.state.expanded=false;setTimeout(()=>{expandBtn.setAttribute('title','Expand logger window');},10);}Dashboard.logger.saveLoggerState();};Dashboard.logger.registerWithUI=function(){if(!Dashboard.ui){Dashboard.ui={};}Dashboard.ui.toggleLogger=Dashboard.logger.toggleLogger;Dashboard.ui.addLogEntry=Dashboard.logger.addLogEntry;Dashboard.ui.saveLoggerState=Dashboard.logger.saveLoggerState;Dashboard.ui.loadLoggerState=Dashboard.logger.loadLoggerState;Dashboard.ui.destroyLogger=Dashboard.logger.destroyLogger;Dashboard.ui.logger=Dashboard.logger.state;};Dashboard.logger.autoInit=function(){if(document.readyState!=='complete'&&document.readyState!=='interactive'){setTimeout(Dashboard.logger.autoInit,100);return;}Dashboard.logger.init();};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',Dashboard.logger.autoInit);}else{setTimeout(Dashboard.logger.autoInit,50);}Dashboard.logger.toggleLogger=function(){if(!Dashboard.logger.state.initialized){Dashboard.logger.safeInitLogger();if(!Dashboard.logger.state.initialized){console.error('Logger: Cannot toggle logger - initialization failed');return;}}const wasVisible=Dashboard.logger.state.visible;Dashboard.logger.state.visible=!Dashboard.logger.state.visible;const logger=Dashboard.logger.state.container;if(logger){if(Dashboard.logger.state.visible){logger.style.display='flex';logger.style.position='fixed';logger.style.bottom='90px';logger.style.left='50%';logger.style.transform='translateX(-50%)';logger.style.maxHeight='calc(100vh - 180px)';logger.style.zIndex='2000';Dashboard.logger.restoreLogEntries();Dashboard.logger.notifyLoggerVisible();}else{logger.style.display='none';Dashboard.logger.notifyLoggerHidden();Dashboard.logger.performLoggerCleanup();}}if(Dashboard.data&&Dashboard.data.enableLogger){Dashboard.data.enableLogger();}Dashboard.logger.saveLoggerState();};Dashboard.logger.addLogEntry=function(fromStatus,toStatus,member,pool,siteName){if(!Dashboard.logger.state.initialized){return;}const now=new Date();const timestamp=now.toLocaleTimeString('en-US',{hour12:true,hour:'2-digit',minute:'2-digit',second:'2-digit'});const memberParts=member.split(':');const address=memberParts[0]||member;const port=memberParts[1]||'';const fullMember=port?`${address}:${port}`:address;let statusChar='○';let symbolColor='#ffffff';if(toStatus.toUpperCase()==='UP'){statusChar='▲';symbolColor='#44ff44';}else if(toStatus.toUpperCase()==='DOWN'){statusChar='▼';symbolColor='#ff4444';}else if(toStatus.toUpperCase()==='DISABLED'||toStatus.toUpperCase()==='SESSION_DISABLED'){statusChar='■';symbolColor='#888888';}const fromStatusText=(fromStatus.toUpperCase()==='DISABLED'||fromStatus.toUpperCase()==='SESSION_DISABLED'?'DIS':fromStatus.toUpperCase());const toStatusText=(toStatus.toUpperCase()==='DISABLED'||toStatus.toUpperCase()==='SESSION_DISABLED'?'DIS':toStatus.toUpperCase());const fromStatusPadded=(fromStatusText+'\u00A0'.repeat(4)).substring(0,4);const toStatusPadded=(toStatusText+'\u00A0'.repeat(4)).substring(0,4);const timeStr=timestamp.padEnd(11,' ');const siteStr=(siteName.substring(0,20)+'\u00A0'.repeat(20)).substring(0,20);const statusChangeStr=(' '+fromStatusPadded+' →'+' '+toStatusPadded+' ');const memberStr=(fullMember.substring(0,48)+'\u00A0'.repeat(48)).substring(0,48);const textPart=`${timeStr} │ ${siteStr} │ ${statusChangeStr} │ ${memberStr} │ ${pool}`;const logEntryHTML=`<span style="color: ${symbolColor};">${statusChar}</span> <span style="color: #ffffff;">${textPart}</span>`;const logEntryData={timestamp:now.getTime(),html:logEntryHTML};Dashboard.logger.saveLogEntryToStorage(logEntryData);const content=document.getElementById('dashboard-logger-content');if(content&&Dashboard.logger.state.visible){const entry=document.createElement('div');entry.className='log-entry';entry.style.fontFamily='Consolas, "Courier New", monospace';entry.style.lineHeight='1.4';entry.style.marginBottom='1px';entry.style.whiteSpace='nowrap';entry.style.fontWeight='bold';entry.style.color='#ffffff';entry.innerHTML=logEntryHTML;content.appendChild(entry);content.scrollTop=content.scrollHeight;while(content.children.length>Dashboard.logger.storage.maxEntries){content.removeChild(content.firstChild);}}if(address&&!address.match(/^\d+\.\d+\.\d+\.\d+$/)){console.log('Logger: Logged entry with hostname:',address,'for pool:',pool);}};Dashboard.logger.clearLogs=function(){const content=document.getElementById('dashboard-logger-content');if(content){content.innerHTML='';content.style.color='#ffffff';}Dashboard.logger.clearSessionStorage();Dashboard.logger.state.columnWidths={timestamp:12,site:14,change:10,member:23,pool:12};};Dashboard.logger.copyLogs=function(){const content=document.getElementById('dashboard-logger-content');if(!content){return;}const logEntries=content.querySelectorAll('.log-entry');if(logEntries.length===0){return;}const logLines=Array.from(logEntries).map(entry=>{const text=entry.textContent||entry.innerText||'';return text.trim();});const logText=logLines.join('\n');if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(logText).then(()=>{const copyBtn=Dashboard.logger.state.container.querySelector('.copy-btn');if(copyBtn){const originalBg=copyBtn.style.background;const originalBorder=copyBtn.style.borderColor;copyBtn.style.background='rgba(0,255,0,0.3)';copyBtn.style.borderColor='rgba(0,255,0,0.5)';copyBtn.textContent='Copied!';setTimeout(()=>{copyBtn.style.background=originalBg;copyBtn.style.borderColor=originalBorder;copyBtn.textContent='Copy';},1500);}}).catch(err=>{Dashboard.logger.fallbackCopy(logText);});}else{Dashboard.logger.fallbackCopy(logText);}};Dashboard.logger.fallbackCopy=function(text){const textarea=document.createElement('textarea');textarea.value=text;textarea.style.position='fixed';textarea.style.left='-999999px';textarea.style.top='-999999px';document.body.appendChild(textarea);textarea.focus();textarea.select();try{const successful=document.execCommand('copy');if(successful){const copyBtn=Dashboard.logger.state.container.querySelector('.copy-btn');if(copyBtn){const originalBg=copyBtn.style.background;const originalBorder=copyBtn.style.borderColor;copyBtn.style.background='rgba(0,255,0,0.3)';copyBtn.style.borderColor='rgba(0,255,0,0.5)';copyBtn.textContent='Copied!';setTimeout(()=>{copyBtn.style.background=originalBg;copyBtn.style.borderColor=originalBorder;copyBtn.textContent='Copy';},1500);}}}catch(err){}finally{document.body.removeChild(textarea);}};Dashboard.logger.saveLogEntryToStorage=function(logEntryData){try{let storedEntries=Dashboard.logger.getStoredLogEntries();storedEntries.push(logEntryData);while(storedEntries.length>Dashboard.logger.storage.maxEntries){storedEntries.shift();}sessionStorage.setItem(Dashboard.logger.storage.key,JSON.stringify(storedEntries));}catch(e){}};Dashboard.logger.getStoredLogEntries=function(){try{const stored=sessionStorage.getItem(Dashboard.logger.storage.key);if(stored){const entries=JSON.parse(stored);if(Array.isArray(entries)){return entries;}}}catch(e){}return[];};Dashboard.logger.restoreLogEntries=function(){const content=document.getElementById('dashboard-logger-content');if(!content){return;}content.innerHTML='';const storedEntries=Dashboard.logger.getStoredLogEntries();if(storedEntries.length===0){return;}storedEntries.forEach(function(entryData){const entry=document.createElement('div');entry.className='log-entry';entry.style.fontFamily='Consolas, "Courier New", monospace';entry.style.lineHeight='1.4';entry.style.marginBottom='1px';entry.style.whiteSpace='nowrap';entry.style.fontWeight='bold';entry.style.color='#ffffff';entry.innerHTML=entryData.html;content.appendChild(entry);});content.scrollTop=content.scrollHeight;};Dashboard.logger.clearSessionStorage=function(){try{sessionStorage.removeItem(Dashboard.logger.storage.key);}catch(e){}};Dashboard.logger.initLoggerEventHandlers=function(){const logger=Dashboard.logger.state.container;if(!logger){return;}logger.addEventListener('click',function(e){const target=e.target;const action=target.getAttribute('data-action');switch(action){case 'font-decrease':e.preventDefault();Dashboard.logger.changeFontSize(-2);break;case 'font-reset':e.preventDefault();Dashboard.logger.resetFontSize();break;case 'font-increase':e.preventDefault();Dashboard.logger.changeFontSize(2);break;case 'copy':e.preventDefault();Dashboard.logger.copyLogs();break;case 'expand':e.preventDefault();Dashboard.logger.toggleExpand();break;case 'clear':e.preventDefault();Dashboard.logger.clearLogs();break;case 'close':e.preventDefault();Dashboard.logger.toggleLogger();break;}});const allButtons=logger.querySelectorAll('.font-btn, .copy-btn, .expand-btn, .clear-btn, .close-btn');allButtons.forEach(button=>{button.addEventListener('mouseenter',function(){if(this.classList.contains('font-btn')||this.classList.contains('copy-btn')||this.classList.contains('expand-btn')){this.style.background='rgba(255,255,255,0.4) !important';this.style.transform='translateY(-1px)';}else if(this.classList.contains('clear-btn')){this.style.background='rgba(255,165,0,0.5) !important';this.style.transform='translateY(-1px)';}else if(this.classList.contains('close-btn')){this.style.background='rgba(220,53,69,0.5) !important';this.style.transform='translateY(-1px)';}});button.addEventListener('mouseleave',function(){if(this.classList.contains('font-btn')||this.classList.contains('copy-btn')||this.classList.contains('expand-btn')){this.style.background='rgba(255,255,255,0.2) !important';this.style.transform='translateY(0)';}else if(this.classList.contains('clear-btn')){this.style.background='rgba(255,165,0,0.3) !important';this.style.transform='translateY(0)';}else if(this.classList.contains('close-btn')){this.style.background='rgba(220,53,69,0.3) !important';this.style.transform='translateY(0)';}});button.addEventListener('mousedown',function(){this.style.transform='translateY(1px)';this.style.boxShadow='0 1px 2px rgba(0,0,0,0.3)';});button.addEventListener('mouseup',function(){this.style.transform='translateY(0)';this.style.boxShadow='none';});});};Dashboard.logger.initLoggerDragResize=function(){const logger=Dashboard.logger.state.container;if(!logger)return;let isDragging=false;let dragOffset={x:0,y:0};const header=logger.querySelector('.logger-header');if(header){header.addEventListener('mousedown',function(e){isDragging=true;const rect=logger.getBoundingClientRect();dragOffset.x=e.clientX-rect.left;dragOffset.y=e.clientY-rect.top;function handleDrag(e){if(!isDragging)return;logger.style.position='fixed';logger.style.left=(e.clientX-dragOffset.x)+'px';logger.style.top=(e.clientY-dragOffset.y)+'px';logger.style.right='auto';logger.style.bottom='auto';logger.style.transform='none';}function stopDrag(){isDragging=false;document.removeEventListener('mousemove',handleDrag);document.removeEventListener('mouseup',stopDrag);}document.addEventListener('mousemove',handleDrag);document.addEventListener('mouseup',stopDrag);e.preventDefault();});}Dashboard.logger.initLoggerResize();};Dashboard.logger.initLoggerResize=function(){const logger=Dashboard.logger.state.container;if(!logger)return;let isResizing=false;let resizeType='';let startX=0;let startY=0;let startWidth=0;let startHeight=0;const resizeHandleBottom=document.getElementById('logger-resize-handle-bottom');const resizeHandleRight=document.getElementById('logger-resize-handle-right');const resizeHandleCorner=document.getElementById('logger-resize-handle-corner');function handleResize(e){if(!isResizing)return;const minHeight=window.innerHeight*0.15;const maxHeight=window.innerHeight*0.8;const minWidth=window.innerWidth*0.5;const maxWidth=window.innerWidth*0.95;if(resizeType==='bottom'||resizeType==='corner'){const newHeight=startHeight+(e.clientY-startY);if(newHeight>=minHeight&&newHeight<=maxHeight){logger.style.height=newHeight+'px';}}if(resizeType==='right'||resizeType==='corner'){const newWidth=startWidth+(e.clientX-startX);if(newWidth>=minWidth&&newWidth<=maxWidth){logger.style.width=newWidth+'px';}}}function stopResize(){isResizing=false;resizeType='';document.removeEventListener('mousemove',handleResize);document.removeEventListener('mouseup',stopResize);}if(resizeHandleBottom){resizeHandleBottom.addEventListener('mousedown',function(e){isResizing=true;resizeType='bottom';startY=e.clientY;startHeight=parseInt(document.defaultView.getComputedStyle(logger).height,10);document.addEventListener('mousemove',handleResize);document.addEventListener('mouseup',stopResize);e.preventDefault();});}if(resizeHandleRight){resizeHandleRight.addEventListener('mousedown',function(e){isResizing=true;resizeType='right';startX=e.clientX;startWidth=parseInt(document.defaultView.getComputedStyle(logger).width,10);document.addEventListener('mousemove',handleResize);document.addEventListener('mouseup',stopResize);e.preventDefault();});}if(resizeHandleCorner){resizeHandleCorner.addEventListener('mousedown',function(e){isResizing=true;resizeType='corner';startX=e.clientX;startY=e.clientY;startWidth=parseInt(document.defaultView.getComputedStyle(logger).width,10);startHeight=parseInt(document.defaultView.getComputedStyle(logger).height,10);document.addEventListener('mousemove',handleResize);document.addEventListener('mouseup',stopResize);e.preventDefault();});}};Dashboard.logger.notifyLoggerVisible=function(){if(Dashboard.core&&Dashboard.core.onLoggerVisible){Dashboard.core.onLoggerVisible();}else{setTimeout(()=>{if(Dashboard.core&&Dashboard.core.onLoggerVisible){Dashboard.core.onLoggerVisible();}},100);}};Dashboard.logger.notifyLoggerHidden=function(){if(Dashboard.core&&Dashboard.core.onLoggerHidden){Dashboard.core.onLoggerHidden();}else{setTimeout(()=>{if(Dashboard.core&&Dashboard.core.onLoggerHidden){Dashboard.core.onLoggerHidden();}},100);}};Dashboard.logger.changeFontSize=function(delta){Dashboard.logger.state.fontSize+=delta;if(Dashboard.logger.state.fontSize<10)Dashboard.logger.state.fontSize=10;if(Dashboard.logger.state.fontSize>64)Dashboard.logger.state.fontSize=64;const content=document.getElementById('dashboard-logger-content');if(content){content.style.fontSize=Dashboard.logger.state.fontSize+'px';}Dashboard.logger.saveLoggerState();};Dashboard.logger.resetFontSize=function(){Dashboard.logger.state.fontSize=22;const content=document.getElementById('dashboard-logger-content');if(content){content.style.fontSize=Dashboard.logger.state.fontSize+'px';}Dashboard.logger.saveLoggerState();};Dashboard.logger.saveLoggerState=function(){const state={visible:Dashboard.logger.state.visible,expanded:Dashboard.logger.state.expanded,fontSize:Dashboard.logger.state.fontSize};try{const currentSite=Dashboard.state?Dashboard.state.currentSite:'default';sessionStorage.setItem('dashboardLoggerState_'+currentSite,JSON.stringify(state));}catch(e){}};Dashboard.logger.loadLoggerState=function(){const currentSite=Dashboard.state?Dashboard.state.currentSite:'default';const saved=sessionStorage.getItem('dashboardLoggerState_'+currentSite);if(saved){try{const state=JSON.parse(saved);Dashboard.logger.state.visible=state.visible||false;Dashboard.logger.state.expanded=state.expanded||false;Dashboard.logger.state.fontSize=state.fontSize||22;}catch(e){}}};Dashboard.logger.applyLoggerState=function(){const logger=Dashboard.logger.state.container;if(!logger)return;logger.style.display=Dashboard.logger.state.visible?'flex':'none';logger.style.position='fixed';logger.style.bottom='90px';logger.style.left='50%';logger.style.transform='translateX(-50%)';logger.style.maxHeight='calc(100vh - 180px)';logger.style.zIndex='2000';const content=document.getElementById('dashboard-logger-content');if(content){content.style.fontSize=Dashboard.logger.state.fontSize+'px';}if(Dashboard.logger.state.visible&&Dashboard.data&&Dashboard.data.enableLogger){Dashboard.data.enableLogger();}if(Dashboard.logger.state.visible){Dashboard.logger.restoreLogEntries();}if(Dashboard.logger.state.visible){Dashboard.logger.notifyLoggerVisible();}};Dashboard.logger.performLoggerCleanup=function(){const logger=Dashboard.logger.state.container;if(!logger){return;}Dashboard.logger.removeLoggerEventListeners(logger);const content=document.getElementById('dashboard-logger-content');if(content){content.innerHTML='';}Dashboard.logger.removeLoggerResizeListeners();Dashboard.logger.clearLoggerTimers();};Dashboard.logger.cleanupLogger=function(){if(Dashboard.logger.state.visible){Dashboard.logger.notifyLoggerHidden();}if(Dashboard.logger.state.container){Dashboard.logger.state.container=null;}Dashboard.logger.state.initialized=false;Dashboard.logger.state.visible=false;Dashboard.logger.state.expanded=false;Dashboard.logger.state.previousDimensions={};};Dashboard.logger.removeLoggerEventListeners=function(logger){if(!logger)return;const newLogger=logger.cloneNode(true);if(logger.parentNode){logger.parentNode.replaceChild(newLogger,logger);Dashboard.logger.state.container=newLogger;Dashboard.logger.initLoggerEventHandlers();Dashboard.logger.initLoggerDragResize();}};Dashboard.logger.removeLoggerResizeListeners=function(){};Dashboard.logger.clearLoggerTimers=function(){};Dashboard.logger.destroyLogger=function(){if(Dashboard.logger.state.visible){Dashboard.logger.notifyLoggerHidden();}const logger=Dashboard.logger.state.container;if(logger&&logger.parentNode){Dashboard.logger.performLoggerCleanup();logger.parentNode.removeChild(logger);}Dashboard.logger.cleanupLogger();};console.log('Dashboard Logger module loaded successfully');